# 图片处理系统

## 🎯 核心理念

**零操作，全自动** - 你只需要正常编写文档和插入图片，系统会自动处理一切。

## ✨ 系统特性

### 自动化处理
- 🤖 **无需手动管理** - 直接在 Markdown 中插入图片
- 📥 **自动下载** - 外部图片自动下载到本地
- 🔄 **统一管理** - 所有图片集中到 `public/assets/`
- 🆔 **智能命名** - 时间戳 + 哈希值确保唯一性
- 🔗 **自动更新** - Markdown 中的引用自动更新

### 支持的图片来源
- 📁 本地图片（相对路径）
- 🔗 Gitee 图片（解决防盗链）
- 🌐 其他外部链接

## 📝 使用方法

### 1. 插入图片（就像平常一样）

```markdown
![本地图片](./images/screenshot.png)
![Gitee图片](https://gitee.com/user/repo/raw/master/image.png)
![其他外链](https://example.com/image.jpg)
```

### 2. 运行命令（自动处理）

```bash
npm run sync    # 一键同步时自动处理
# 或
npm run build   # 本地构建时自动处理
```

### 3. 完成！
- 外部图片已下载到本地
- 所有图片已移动到 `public/assets/`
- Markdown 中的引用已更新
- 临时文件已自动清理

## 🔧 技术细节

### 文件命名规则
```
时间戳_哈希值.扩展名
例如：1758120878184_66f4da92.png
```

### 处理流程
1. 扫描所有 Markdown 文件
2. 识别图片引用（跳过已处理的）
3. 下载外部图片 / 复制本地图片
4. 生成唯一文件名
5. 更新 Markdown 引用
6. 清理临时文件

### URL 适配
- **本地开发**: `http://localhost:5173/WTC-Docs/assets/xxx.png`
- **GitHub Pages**: `https://zhaoheng666.github.io/WTC-Docs/assets/xxx.png`

## 📁 目录结构

```
docs/
├── public/
│   └── assets/              # 所有图片统一存储位置
├── .vitepress/
│   └── scripts/
│       └── image-processor.js  # 图片处理核心
└── 你的文档和图片...
```

## ⚠️ 注意事项

1. **首次处理** - 可能需要时间下载所有外部图片
2. **网络问题** - 下载失败的图片会保留原链接
3. **已处理跳过** - 系统智能识别已处理的图片，避免重复
4. **自动清理** - 处理完成后自动删除临时文件

## 🎉 优势

- ✅ **解决防盗链** - Gitee 等外部图片本地化
- ✅ **统一管理** - 所有图片集中管理
- ✅ **避免冲突** - 唯一 ID 防止重名
- ✅ **性能优化** - 本地图片加载更快
- ✅ **离线可用** - 不依赖外部图床

## 💡 最佳实践

1. **正常编写** - 像平常一样插入图片即可
2. **定期同步** - 使用 `npm run sync` 提交更新
3. **无需关心** - 图片处理完全自动化

## 🆘 常见问题

### Q: 图片没有被处理？
A: 检查是否运行了 `npm run build` 或 `npm run sync`

### Q: 外部图片下载失败？
A: 检查网络连接，失败的图片会保留原链接

### Q: 可以手动管理图片吗？
A: 不建议，让系统自动处理更可靠

### Q: 如何清理未使用的图片？
A: 系统会在下次处理时自动识别和管理