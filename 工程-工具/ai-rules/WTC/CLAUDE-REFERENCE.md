# CLAUDE.md

**WorldTourCasino ä¸»é¡¹ç›® AI ä¸Šä¸‹æ–‡æ–‡ä»¶**

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

---

## ğŸ“š AI è§„åˆ™ç´¢å¼•

**æ‰€æœ‰è§„åˆ™æ–‡æ¡£ä½äº**: `docs/å·¥ç¨‹-å·¥å…·/ai-rules/`

### é€šç”¨è§„åˆ™ (shared/)

é€‚ç”¨äºä¸»é¡¹ç›®å’Œæ‰€æœ‰å­é¡¹ç›®

- [Git æäº¤ç±»å‹å‚è€ƒ](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/shared/git-commit-types-reference) - chore/feat/fix/docs...
- [æ–‡ä»¶è·¯å¾„é“¾æ¥è§„åˆ™](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/shared/file-path-links-rules) - è½¬ GitHub é“¾æ¥è§„åˆ™
- [æ–‡æ¡£ç¼–å†™æ ‡å‡†](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/shared/doc-writing-standards) - Markdown/VitePress è§„èŒƒ

### ä¸»é¡¹ç›®è§„åˆ™ (WTC/)

ä»…é€‚ç”¨äº WorldTourCasino ä¸»é¡¹ç›®

- [ä¸“ä¸šæœ¯è¯­è¡¨](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/WTC/terminology-glossary) - é¡¹ç›®ä¸“æœ‰æ¦‚å¿µå’Œæœ¯è¯­
- [Git æäº¤è§„åˆ™](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/WTC/git-commit-rules) - ä¸»é¡¹ç›®æäº¤ç¡®è®¤æµç¨‹
- [Shell è„šæœ¬æ ‡å‡†](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/WTC/shell-script-standards) - zsh è§„èŒƒ
- [é…ç½®æ–‡ä»¶åŒæ­¥è§„åˆ™](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/WTC/config-sync-rules) - settings.json â†” workspace åŒæ­¥
- [æ–‡æ¡£è®°å½•æŒ‡å—](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/WTC/documentation-guide) - å¦‚ä½•ä½¿ç”¨ docs è®°å½•

### docs å­é¡¹ç›®è§„åˆ™ (docs/)

ä»…é€‚ç”¨äº docs å­é¡¹ç›®

- [VitePress å¼€å‘æ ‡å‡†](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/docs/vitepress-dev-standards) - VitePress ç‰¹å®šè§„èŒƒ
- [å›¾ç‰‡å¤„ç†å‚è€ƒ](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/docs/image-processing-reference) - è‡ªåŠ¨å›¾ç‰‡å¤„ç†
- [é“¾æ¥å¤„ç†è§„åˆ™](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/docs/link-processing-rules) - ç›¸å¯¹é“¾æ¥è½¬ç»å¯¹ HTTP é“¾æ¥ âš ï¸ **å¼ºåˆ¶**
- [è‡ªåŠ¨åŒ–æäº¤è§„åˆ™](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/docs/auto-commit-rules) - docs è‡ªåŠ¨åŒ–æäº¤

### extensions å­é¡¹ç›®è§„åˆ™ (extensions/)

ä»…é€‚ç”¨äº extensions å­é¡¹ç›®

- [æ‰©å±•å¼€å‘æ ‡å‡†](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/extensions/extension-dev-standards) - TypeScript/package.json è§„èŒƒ
- [æ‰©å±•æ¿€æ´»è§„åˆ™](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/extensions/activation-rules) - åªåœ¨ WTC é¡¹ç›®æ¿€æ´»
- [ç¬¦å·é“¾æ¥å®‰è£…æŒ‡å—](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/extensions/symlink-installation-guide) - æ‰©å±•å®‰è£…æœºåˆ¶

### æ–°å¢è§„åˆ™æŒ‡å—

**åˆ¤æ–­è§„åˆ™åˆ†ç±»**:

1. **é€šç”¨è§„åˆ™ (shared/)**: ä¸»é¡¹ç›®å’Œæ‰€æœ‰å­é¡¹ç›®éƒ½é€‚ç”¨
   - ä¾‹å¦‚ï¼šGit æäº¤ç±»å‹ã€æ–‡ä»¶è·¯å¾„é“¾æ¥ã€æ–‡æ¡£ç¼–å†™è§„èŒƒ

2. **å­é¡¹ç›®è§„åˆ™ (WTC/docs/extensions/)**: ç‰¹å®šé¡¹ç›®/å­é¡¹ç›®é€‚ç”¨
   - æ¯ä¸ªå­é¡¹ç›®åœ¨ `ai-rules/` ä¸‹æœ‰ç‹¬ç«‹ç›®å½•
   - åŒ…æ‹¬ï¼šå¼€å‘è§„èŒƒã€å·¥ä½œæµç¨‹ã€ä¸“ä¸šæœ¯è¯­ç­‰

**æ–°å¢è§„åˆ™æµç¨‹**:
1. ç¡®å®šè§„åˆ™åˆ†ç±»ï¼ˆshared è¿˜æ˜¯ç‰¹å®šå­é¡¹ç›®ï¼‰
2. åœ¨ `docs/å·¥ç¨‹-å·¥å…·/ai-rules/` å¯¹åº”ç›®å½•åˆ›å»º .md æ–‡ä»¶
3. æ›´æ–°æœ¬æ–‡ä»¶ï¼ˆCLAUDE.mdï¼‰çš„è§„åˆ™ç´¢å¼•

**æ³¨æ„**: ä¸“ä¸šæœ¯è¯­ã€æ¦‚å¿µè§£é‡Šä¹Ÿå±äºè§„åˆ™çš„ä¸€éƒ¨åˆ†ï¼Œåº”æ”¾åœ¨å¯¹åº”å­é¡¹ç›®çš„è§„åˆ™ç›®å½•ä¸­

---

## ğŸ¯ å­é¡¹ç›®ç´¢å¼•

| å­é¡¹ç›® | è·¯å¾„ | è§„åˆ™ç›®å½• | è¯´æ˜ |
|--------|------|---------|------|
| ä¸»é¡¹ç›® | `.` | `docs/å·¥ç¨‹-å·¥å…·/ai-rules/WTC/` | WorldTourCasino æ¸¸æˆä¸»é¡¹ç›® |
| docs | `docs/` | `docs/å·¥ç¨‹-å·¥å…·/ai-rules/docs/` | æ–‡æ¡£ç³»ç»Ÿï¼ˆVitePressï¼‰ |
| extensions | `vscode-extensions/` | `docs/å·¥ç¨‹-å·¥å…·/ai-rules/extensions/` | VS Code æ‰©å±•ç”Ÿæ€ |

---

## ğŸš€ å¿«é€Ÿå‚è€ƒ

### æ ¸å¿ƒæ„å»ºå‘½ä»¤

#### æœ¬åœ°å¼€å‘

```bash
# æ„å»ºç‰¹å®šé£æ ¼ç‰ˆæœ¬
scripts/build_local_oldvegas.sh    # CV - Classic Vegas ç‰ˆæœ¬
scripts/build_local_doublehit.sh   # DH - Double Hit ç‰ˆæœ¬
scripts/build_local_doublex.sh     # DHX - Double X ç‰ˆæœ¬
scripts/build_local_vegasstar.sh   # VS - Vegas Star ç‰ˆæœ¬
scripts/build_local_all.sh         # æ‰€æœ‰ç‰ˆæœ¬

# æ„å»ºåè¿è¡Œ
open index.html  # åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æµ‹è¯•
```

#### æµ‹è¯•ä¸éƒ¨ç½²

```bash
# éƒ¨ç½²æµ‹è¯•ç‰ˆæœ¬
scripts/deploy_fb_alpha_normal.sh     # Facebook æµ‹è¯•ç‰ˆ
scripts/deploy_fb_alpha_dynamic.sh    # Facebook æŠ˜æ‰£æµ‹è¯•ç‰ˆ

# ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ï¼ˆéœ€å…ˆåœ¨ resource_dirs.json ä¸­å‡çº§ç‰ˆæœ¬å·ï¼‰
scripts/sync_flavor.sh              # åŒæ­¥é£æ ¼æ–‡ä»¶ï¼ˆé¦–å…ˆè¿è¡Œï¼‰
scripts/gen_res_list.sh             # ç”Ÿæˆèµ„æºåˆ—è¡¨
scripts/build_fb.sh                 # æ„å»º Facebook ç‰ˆæœ¬
scripts/build_native.sh             # æ„å»ºåŸç”Ÿç‰ˆæœ¬
```

#### ä»£ç è´¨é‡æ£€æŸ¥

```bash
npm run lint                        # è¿è¡Œ ESLintï¼ˆES5 ä¸¥æ ¼æ¨¡å¼ï¼‰
```

### æ–‡æ¡£å­é¡¹ç›®å¿«é€Ÿå‘½ä»¤

```bash
cd docs
npm run dev                         # å¯åŠ¨æ–‡æ¡£æœåŠ¡å™¨ï¼ˆå›ºå®šç«¯å£ 5173ï¼‰
npm run build                       # æ„å»ºæ–‡æ¡£
npm run sync                        # åŒæ­¥æ–‡æ¡£åˆ° GitHub Pages
```

**æ–‡æ¡£è®¿é—®åœ°å€**:
- æœ¬åœ°: http://localhost:5173/WTC-Docs/
- çº¿ä¸Š: https://zhaoheng666.github.io/WTC-Docs/

---

## ğŸ“¦ é¡¹ç›®æ¶æ„

### å¤šé£æ ¼èµŒåœºæ¸¸æˆç³»ç»Ÿ

- **æ ¸å¿ƒå¼•æ“**: Cocos2d-html5 JavaScript æ¸¸æˆå¼•æ“
- **å¼€å‘è¯­è¨€**: ES5 JavaScriptï¼ˆå¼ºåˆ¶ä¸¥æ ¼æ¨¡å¼ï¼‰
- **æ¨¡å—ç³»ç»Ÿ**: Browserify è¿›è¡Œæ‰“åŒ…
- **æ„å»ºç³»ç»Ÿ**: è‡ªå®šä¹‰ bash è„šæœ¬é…åˆ Python å·¥å…·

### å…³é”®ç›®å½•ç»“æ„

```
WorldTourCasino/
â”œâ”€â”€ src/                        # é¡¹ç›®æ ¸å¿ƒä»£ç ï¼ˆ5,762+ JS æ–‡ä»¶ï¼‰- æ‰€æœ‰é£æ ¼å…±äº«
â”œâ”€â”€ res_*/                      # é£æ ¼ç‰¹å®šçš„èµ„æºå’Œé…ç½®
â”‚   â”œâ”€â”€ res_oldvegas/           # CV - Classic Vegasï¼ˆä¸»è¦å·¥ä½œåˆ†æ”¯ï¼‰
â”‚   â”œâ”€â”€ res_doublehit/          # DH - Double Hit
â”‚   â”œâ”€â”€ res_vegasstar/          # VS - Vegas Star
â”‚   â””â”€â”€ res_doublex/            # DHX - Double X
â”œâ”€â”€ scripts/                    # æ„å»ºå’Œéƒ¨ç½²è‡ªåŠ¨åŒ–è„šæœ¬
â”œâ”€â”€ libZenSDK/                  # SDK ä¸­é—´ä»¶ï¼ˆå­ä»“åº“ï¼‰
â”œâ”€â”€ frameworks/                 # Cocos2d å¼•æ“æ¡†æ¶ï¼ˆå­ä»“åº“ï¼‰
â”‚   â”œâ”€â”€ cocos2d-html5/          # Cocos2d-html5 å¼•æ“
â”‚   â””â”€â”€ cocos2d-x/              # Cocos2d-x å¼•æ“
â”œâ”€â”€ docs/                       # æ–‡æ¡£å­é¡¹ç›®ï¼ˆç‹¬ç«‹ä»“åº“ï¼‰
â”œâ”€â”€ vscode-extensions/          # VS Code æ‰©å±•å­é¡¹ç›®ï¼ˆç‹¬ç«‹ä»“åº“ï¼‰
â”œâ”€â”€ publish/                    # å‘å¸ƒä¸­é—´ç›®å½•ï¼ˆæ„å»ºè¾“å‡ºï¼‰
â”œâ”€â”€ assets_config/              # Native èµ„æº manifest æ–‡ä»¶
â”œâ”€â”€ native_bundle_res/          # Native æ‰“åŒ…æ›¿æ¢æ–‡ä»¶
â”œâ”€â”€ jenkins_tools/              # Jenkins CI/CD è„šæœ¬
â”œâ”€â”€ .webpcache/                 # å›¾ç‰‡å‹ç¼©ç¼“å­˜ï¼ˆWebPï¼‰
â””â”€â”€ res/                        # æœªä½¿ç”¨ï¼ˆå†å²é—ç•™ï¼‰
```

### é£æ ¼ç³»ç»Ÿæ¶æ„

è¯¦è§: [ä¸“ä¸šæœ¯è¯­è¡¨ - Flavor System](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/WTC/terminology-glossary.md#å¤šé£æ ¼ç³»ç»Ÿflavor-system)

### èµ„æºç®¡ç†

- **ç‰ˆæœ¬æ§åˆ¶**: é€šè¿‡ `resource_dirs.json` ç®¡ç†ï¼ˆdebug/release ç‰ˆæœ¬ï¼‰
- **åŠ¨æ€åŠ è½½**: æ´»åŠ¨å¯ä»¥å»¶è¿ŸåŠ è½½
- **CDN éƒ¨ç½²**: è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œç¼“å­˜å¤±æ•ˆå¤„ç†

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ„å»ºå‰ç½®æ¡ä»¶

```bash
npm install browserify@11.2.0 -g
npm install uglifyjs -g
ulimit -n 65535  # å¤„ç†å¤§é‡æ–‡ä»¶æ—¶éœ€è¦
```

### é£æ ¼åˆ‡æ¢å·¥ä½œæµ

1. å½“å‰åˆ†æ”¯é€šå¸¸é’ˆå¯¹ä¸€ä¸ªé£æ ¼ï¼ˆæŸ¥çœ‹ git statusï¼‰
2. åˆ‡æ¢é£æ ¼æ—¶è¿è¡Œ `scripts/sync_flavor.sh`
3. èµ„æºå˜æ›´åå¿…é¡»é‡æ–°ç”Ÿæˆèµ„æºåˆ—è¡¨

### VS Code é›†æˆ

- **ä»»åŠ¡**: `.vscode/tasks.json` ä¸­æœ‰ 100+ ä¸ªè‡ªåŠ¨åŒ–ä»»åŠ¡
- **æ‰©å±•ç”Ÿæ€**: è¯¦è§ [extensions å­é¡¹ç›®è§„åˆ™](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/extensions)
  - `wtc-docs-server` - æ–‡æ¡£æœåŠ¡å™¨ç®¡ç†
  - `wtc-local-server` - æœ¬åœ°å¼€å‘æœåŠ¡å™¨
  - `wtc-toolbars` - å·¥å…·æ å¿«æ·æ“ä½œ
  - `wtc-google-drive` - Google Drive ä¸Šä¼ 
- **è‡ªåŠ¨åŒ–**:
  - æ‰“å¼€é¡¹ç›®æ—¶é€šè¿‡ `onEnter.sh` è‡ªåŠ¨å®‰è£…æ‰©å±•
  - é‡è½½å‰é€šè¿‡ `cleanup-services.sh` æ¸…ç†æœåŠ¡
  - æœåŠ¡çŠ¶æ€é€šè¿‡æ‰©å±•çŠ¶æ€æ å®æ—¶ç›‘æ§

### é‡è¦æ–‡ä»¶

è¯¦è§: [ä¸“ä¸šæœ¯è¯­è¡¨ - é‡è¦æ–‡ä»¶](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/WTC/terminology-glossary.md#é‡è¦æ–‡ä»¶)

### Git å·¥ä½œæµ

- **ä¸»åˆ†æ”¯**: `classic_vegas`
- **åŠŸèƒ½åˆ†æ”¯**: `classic_vegas_cvs_v*_subject_*`
- **æäº¤æ ¼å¼**: `cvï¼šå…³å¡X [æè¿°]`

---

## ğŸ”§ å¸¸ç”¨å·¥ä½œæµç¨‹

### æ·»åŠ æ–°åŠŸèƒ½

1. æ£€æŸ¥å½“å‰åˆ†æ”¯å’Œé£æ ¼ä¸Šä¸‹æ–‡
2. ä¿®æ”¹ `src/`ï¼ˆå…±äº«ï¼‰æˆ– `res_*/flavor/`ï¼ˆé£æ ¼ç‰¹å®šï¼‰ä¸­çš„æºç 
3. è¿è¡Œæœ¬åœ°æ„å»º: `scripts/build_local_[flavor].sh`
4. åœ¨æµè§ˆå™¨ä¸­æµ‹è¯•
5. è¿è¡Œä»£ç æ£€æŸ¥: `npm run lint`

### æ›´æ–°èµ„æº

1. åœ¨ç›¸åº”çš„ `res_*/` ç›®å½•ä¸­æ·»åŠ /ä¿®æ”¹èµ„æº
2. è¿è¡Œ `scripts/gen_res_list.py` æ›´æ–°æ¸…å•
3. å¦‚éœ€è¦ï¼Œåœ¨ `resource_dirs.json` ä¸­å‡çº§ç‰ˆæœ¬å·
4. æœ¬åœ°æ„å»ºå¹¶æµ‹è¯•

### è°ƒè¯•

- Browserify ç”Ÿæˆ source maps ç”¨äºè°ƒè¯•
- æ£€æŸ¥æ§åˆ¶å°çš„ Cocos2d åˆå§‹åŒ–é”™è¯¯
- èµ„æºåŠ è½½é—®é¢˜é€šå¸¸ä¸æ¸…å•ä¸åŒ¹é…æœ‰å…³

---

## ğŸ” æ•…éšœæ’æŸ¥

**é‡è¦**ï¼šé‡åˆ°é—®é¢˜æ—¶ï¼Œè¯·å…ˆæŸ¥é˜… `docs/æ•…éšœæ’æŸ¥/` ç›®å½•ä¸‹çš„æ–‡æ¡£ï¼Œå¾ˆå¤šé—®é¢˜å·²æœ‰è§£å†³æ–¹æ¡ˆã€‚

### å¿«é€Ÿå…¥å£

- [æ•…éšœæ’æŸ¥ç´¢å¼•](https://zhaoheng666.github.io/WTC-Docs/æ•…éšœæ’æŸ¥/) - åœ¨çº¿æ–‡æ¡£
- [VSCode æ‰©å±•é—®é¢˜](https://zhaoheng666.github.io/WTC-Docs/æ•…éšœæ’æŸ¥/vscode-æ‰©å±•å·¥ä½œåŒºå…¼å®¹æ€§é—®é¢˜.html)
- æœ¬åœ°æ–‡æ¡£: [docs/æ•…éšœæ’æŸ¥/](http://localhost:5173/WTC-Docs/å·¥ç¨‹-å·¥å…·/ai-rules/WTC/docs/æ•…éšœæ’æŸ¥)

---

**æœ€åæ›´æ–°**: 2025-10-14
**ç»´æŠ¤è€…**: WorldTourCasino Team
