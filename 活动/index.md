# 活动

本目录包含了WorldTourCasino项目的活动相关文档，涵盖了操作手册、开发流程、接口文档等重要内容。

## 📋 目录结构

#### 📁 接口

- 📝 [Activity](%E6%B4%BB%E5%8A%A8/%E6%8E%A5%E5%8F%A3/Activity)
- 📝 [EntranceController](%E6%B4%BB%E5%8A%A8/%E6%8E%A5%E5%8F%A3/EntranceController)
- 📝 [MainUIController](%E6%B4%BB%E5%8A%A8/%E6%8E%A5%E5%8F%A3/MainUIController)
- 📝 [SmartCCBController](%E6%B4%BB%E5%8A%A8/%E6%8E%A5%E5%8F%A3/SmartCCBController)
- 📝 [WidgetController](%E6%B4%BB%E5%8A%A8/%E6%8E%A5%E5%8F%A3/WidgetController)

#### 📁 操作手册

- 📝 [HR赛季资源替换](%E6%B4%BB%E5%8A%A8/%E6%93%8D%E4%BD%9C%E6%89%8B%E5%86%8C/HR%E8%B5%9B%E5%AD%A3%E8%B5%84%E6%BA%90%E6%9B%BF%E6%8D%A2)
- 📝 [新版收集系统SOP操作手册](%E6%B4%BB%E5%8A%A8/%E6%93%8D%E4%BD%9C%E6%89%8B%E5%86%8C/%E6%96%B0%E7%89%88%E6%94%B6%E9%9B%86%E7%B3%BB%E7%BB%9FSOP%E6%93%8D%E4%BD%9C%E6%89%8B%E5%86%8C)

#### 📁 流程

- 📝 [新人活动开发流程](%E6%B4%BB%E5%8A%A8/%E6%B5%81%E7%A8%8B/%E6%96%B0%E4%BA%BA%E6%B4%BB%E5%8A%A8%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B)

#### 📝 其他

- 📝 [HR 赛季资源替换](HR%20%E8%B5%9B%E5%AD%A3%E8%B5%84%E6%BA%90%E6%9B%BF%E6%8D%A2)
- 📝 [MOB 活动小机台资源优化](MOB%20%E6%B4%BB%E5%8A%A8%E5%B0%8F%E6%9C%BA%E5%8F%B0%E8%B5%84%E6%BA%90%E4%BC%98%E5%8C%96)
- 📝 [index copy](index%20copy)
- 📝 [新版收集系统操作手册](%E6%96%B0%E7%89%88%E6%94%B6%E9%9B%86%E7%B3%BB%E7%BB%9F%E6%93%8D%E4%BD%9C%E6%89%8B%E5%86%8C)
- 📝 [活动资源归档](%E6%B4%BB%E5%8A%A8%E8%B5%84%E6%BA%90%E5%BD%92%E6%A1%A3)
- 📝 [通用 activity reward 说明](%E9%80%9A%E7%94%A8%20activity%20reward%20%E8%AF%B4%E6%98%8E)

---

*📅 最后更新: 2025/9/25*
*🤖 此文件由构建系统自动生成*

## 📚 文档列表

### 🔧 操作手册

-**[新版收集系统SOP操作手册](操作手册/新版收集系统SOP操作手册.md)** - S19赛季收集系统完整操作指南，包含代码调整、资源处理、部署流程等

-**[HR赛季资源替换](操作手册/HR赛季资源替换.md)** - High Rollers赛季资源替换工作流程，包含FAQ处理、最终大奖配置等

### 🚀 开发流程

-**[新人活动开发流程](流程/新人活动开发流程.md)** - 新人活动完整开发指南，从脚本生成到部署上线的全流程

### 📖 接口文档

#### 核心架构

-**[Activity](接口/Activity.md)** - Activity核心类体系详细文档

-`Activity.js` - 活动基类

-`BaseActivity.js` - 基础活动类

- 具体活动实现示例

#### UI控制器体系

-**[EntranceController](接口/EntranceController.md)** - 活动入口控制器文档

-`ActivityEntranceController.js` - 大厅入口控制器基类

- 具体实现示例

-**[MainUIController](接口/MainUIController.md)** - 主界面控制器文档

-`ActivityBaseController.js` - UI控制器基类

-`ActivityMainUIController.js` - 主界面控制器基类

- 具体实现示例

-**[SmartCCBController](接口/SmartCCBController.md)** - 智能CCB控制器文档

-`ActivityWidgetController.js` - UI控制器基类，提供事件管理、定时任务等功能

-**[WidgetController](接口/WidgetController.md)** - 小部件控制器文档

-`ActivityWidgetController.js` - 关卡入口控制器基类

-`ActivityBaseWidgetController.js` - 抽象基类

- 具体实现示例

## 🎯 技术架构概览

### 核心技术栈

-**游戏引擎**: Cocos2d-html5 v3.13

-**开发语言**: ES5 JavaScript (严格模式)

-**模块系统**: Browserify

-**构建系统**: 自定义bash脚本 + Python工具

### 架构分层

```

┌─────────────────────────────────────────────────────────────┐

│                        UI层 (Controllers)                    │

├─────────────────────────────────────────────────────────────┤

│  EntranceController  │  MainUIController  │  WidgetController │

│  (大厅入口)           │   (主界面)          │   (关卡入口)       │

├─────────────────────────────────────────────────────────────┤

│                      逻辑层 (Activities)                      │

├─────────────────────────────────────────────────────────────┤

│   Activity.js        │  BaseActivity.js   │  具体Activity实现   │

│   (基础定义)          │   (通用功能)        │                   │

├─────────────────────────────────────────────────────────────┤

│                      数据层 & 服务层                          │

├─────────────────────────────────────────────────────────────┤

│  TaskGroup/Task管理  │   奖励系统         │   支付系统         │

└─────────────────────────────────────────────────────────────┘

```

### 设计模式

#### 1. 继承体系设计

-**Activity体系**: `Activity` → `BaseActivity` → 具体活动实现

-**Controller体系**: 基础控制器 → 抽象控制器 → 具体控制器

#### 2. 事件驱动架构

- 统一的事件派发和监听机制
- 自动化的事件清理和资源管理
- 防重复点击和状态保护

#### 3. 模板方法模式

- 定义标准的生命周期方法
- 预留扩展点供子类实现
- 保证代码的一致性和可维护性

## 🔄 开发工作流

### 新活动开发流程

1.**脚本生成**: 使用 `create_activity.py` 生成基础代码

2.**配置文件**: 设置资源路径、活动名称等

3.**逻辑实现**: 继承 `BaseActivity` 实现核心逻辑

4.**UI开发**: 实现入口、主界面、小部件控制器

5.**测试验证**: 本地测试和集成测试

6.**部署上线**: 资源部署和版本发布

### 资源管理流程

1.**资源准备**: 美术资源、配置文件、音效等

2.**资源处理**: 压缩、打包、版本控制

3.**资源部署**: CDN部署和缓存更新

4.**版本管理**: 版本号升级和回滚机制

## 🛠️ 最佳实践

### 代码规范

- 严格遵循ES5语法和eslint规则
- 使用统一的命名规范和代码风格
- 充分利用基类功能，避免重复实现
- 正确管理资源生命周期，防止内存泄漏

### 性能优化

- 合理使用对象池和资源复用
- 优化动画性能和渲染效率
- 控制网络请求频率和数据量
- 实施延迟加载和按需加载策略

### 测试策略

- 单元测试覆盖核心逻辑
- 集成测试验证完整流程
- 兼容性测试确保多平台支持
- 性能测试保证用户体验

## 📋 常见问题

### 开发相关

-**Q**: 如何创建新的活动？

-**A**: 参考[新人活动开发流程](流程/新人活动开发流程.md)文档

-**Q**: 如何更新收集系统赛季？

-**A**: 参考[新版收集系统SOP操作手册](操作手册/新版收集系统SOP操作手册.md)文档

-**Q**: 控制器继承关系如何选择？

-**A**: 参考各控制器文档中的"使用指南"部分

### 架构相关

-**Q**: Activity和Controller的职责划分？

-**A**: Activity负责业务逻辑和数据管理，Controller负责UI交互和显示控制

-**Q**: 如何正确处理事件和回调？

-**A**: 使用基类提供的事件管理机制，确保正确注册和清理

-**Q**: 如何优化性能和内存使用？

-**A**: 遵循最佳实践，合理使用资源池，及时清理无用资源

## 🔗 相关链接

### 项目文档

- [技术文档总览](../技术文档.md)
- [工作规范](../工作规范.md)
- [故障排查指南](../故障排查/)

### 开发工具

- 构建脚本: 位于主项目的 `scripts/` 目录
- VSCode配置: 位于主项目的 `.vscode/` 目录
- 代码规范: 位于主项目的 `.eslintrc.js` 文件

### 核心代码

- Activity类: 位于主项目的 `src/task/entity/` 目录
- Controller类: 位于主项目的 `src/activity/controller/` 目录
- 配置文件: 位于主项目的 `src/config/` 目录

## 📝 更新记录

| 版本 | 日期 | 更新内容 |

|------|------|----------|

| v1.0.0 | 2024-09-24 | 初始版本，完成所有核心文档的Markdown转换 |

---

## 💡 使用建议

1.**新手入门**: 建议按照"开发流程" → "架构文档" → "操作手册"的顺序阅读

2.**问题排查**: 优先查阅相关架构文档的"常见问题"部分

3.**代码参考**: 查看具体实现示例，如 `RechargeBonanzaActivity`等

4.**最佳实践**: 遵循文档中的开发指导和最佳实践建议

通过这些文档，开发团队可以更高效地进行活动开发、系统维护和问题排查工作。
